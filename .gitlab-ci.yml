stages:
  - conformity
  - build
  - test

image: registry.dune-project.org/docker/ci/ubuntu:20.04

branch-conformity:
  stage: conformity
  script:
    - |
      if [[ $CI_COMMIT_REF_NAME =~ ^[a-zA-Z0-9]+\/exercise[0-9]+ ]] || [[ $GITLAB_USER_LOGIN -eq "spraetor" ]];
      then
        echo "Branch name not conforming. Must be <identity>/exercise<nr>"
        exit 1
      fi
